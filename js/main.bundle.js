!function(){"use strict";function e(e){const t=document.querySelector(e);t.classList.add("hide"),t.classList.remove("show"),document.body.style.overflow="visible"}function t(e,t){const n=document.querySelector(e);n.classList.add("show"),n.classList.remove("hide"),document.body.style.overflow="hidden",t&&clearTimeout(t)}window.addEventListener("DOMContentLoaded",(()=>{const n=setTimeout((()=>t(".modal",n)),1e5);(function(e,t,n,o){const s=document.querySelector(e),c=s.querySelectorAll(t),r=document.querySelectorAll(n);function a(){r.forEach((e=>{e.classList.add("hide")})),c.forEach((e=>{e.classList.remove(o)}))}function i(e){r[e].classList.remove("hide"),c[e].classList.add(o)}a(),i(0),s.addEventListener("click",(e=>{e.target&&e.target.classList.contains(t.slice(1))&&c.forEach(((t,n)=>{e.target==t&&(a(),i(n))}))}))})(".tabheader__items",".tabheader__item",".tabcontent","tabheader__item_active"),function(n,o,s){const c=document.querySelector(n);document.querySelectorAll(o).forEach((e=>{e.addEventListener("click",(()=>t(n,s)))})),c.addEventListener("click",(t=>{(t.target&&""==t.target.getAttribute("data-close")||t.target==c)&&e(n)})),document.addEventListener("keyup",(t=>{"Escape"==t.code&&c.classList.contains("show")&&e(n)})),window.addEventListener("scroll",(function e(){document.documentElement.scrollHeight<=document.documentElement.clientHeight+window.pageYOffset&&(t(n,s),window.removeEventListener("scroll",e))}))}(".modal","[data-modal]",n),function(e,t){function n(e){return e<10?`0${e}`:e}!function(e,t){const o=document.querySelector(e),s=o.querySelector("#days"),c=o.querySelector("#hours"),r=o.querySelector("#minutes"),a=o.querySelector("#seconds"),i=setInterval((function(){const e=function(e){const t=e-new Date;return{result:t,days:Math.floor(t/864e5),hours:Math.floor(t/36e5%24),minutes:Math.floor(t/6e4%60),seconds:Math.floor(t/1e3%60)}}(t);if(e.result<=0)return clearInterval(i);s.textContent=n(e.days),c.textContent=n(e.hours),r.textContent=n(e.minutes),a.textContent=n(e.seconds)}),1e3)}(e,t)}(".timer",Date.parse(new Date)+2592e5),function(){const e=document.querySelector(".menu .container");e.innerHTML="";class t{constructor(e,t,n,o,s,c){this.src=e,this.alt=t,this.title=n,this.descr=o,this.price=s,this.parent=c,this.transfer=75,this.changeToRUB()}changeToRUB(){this.price=Math.floor(this.price*this.transfer)}render(){const e=document.createElement("div");e.classList.add("menu__item"),e.innerHTML=`\n        <img src="${this.src}" alt=${this.alt}>\n        <h3 class="menu__item-subtitle">${this.title}</h3>\n        <div class="menu__item-descr">${this.descr}</div>\n        <div class="menu__item-divider"></div>\n        <div class="menu__item-price">\n          <div class="menu__item-cost">Цена:</div>\n          <div class="menu__item-total"><span>${this.price}</span> руб/день</div>\n        </div>\n      `,this.parent.appendChild(e)}}(async e=>{const t=await fetch(e);if(!t.ok)throw new Error(`Could not fetch ${e}, status: ${t.status}`);return await t.json()})("http://localhost:3000/menu").then((n=>{n.forEach((({img:n,altimg:o,title:s,descr:c,price:r})=>{new t(n,o,s,c,r,e).render()}))}))}(),function(){const e=document.querySelector(".calculating__result span");let t,n,o,s,c,r;function a(){r="man"===t?Math.round((88.36+13.4*o+4.8*n-5.7*s)*c):Math.round((447.6+9.2*o+3.1*n-4.3*s)*c),e.textContent=n&&o&&s&&c?r:"______"}function i(e){const n=document.querySelectorAll(`${e} div`);n.forEach((e=>{e.classList.remove("calculating__choose-item_active"),localStorage.sex==e.id&&e.classList.add("calculating__choose-item_active"),localStorage.activity==e.dataset.ratio&&e.classList.add("calculating__choose-item_active")})),document.querySelector(e).addEventListener("click",(e=>{e.target.classList.contains("calculating__choose-item")&&(e.target.dataset.ratio?(c=+e.target.dataset.ratio,localStorage.setItem("activity",+e.target.dataset.ratio)):(t=e.target.id,localStorage.setItem("sex",e.target.id)),n.forEach((t=>{t.classList.remove("calculating__choose-item_active"),e.target==t&&t.classList.add("calculating__choose-item_active")}))),a()}))}function l(e){const t=document.querySelector(e);t.addEventListener("input",(()=>{switch(t.value.match(/\D/g)?t.style.border="1px solid red":t.style.border="none",t.id){case"height":n=+t.value;break;case"weight":o=+t.value;break;case"age":s=+t.value}a()}))}localStorage.getItem("sex")?t=localStorage.sex:(t="woman",localStorage.setItem("sex",t)),localStorage.getItem("activity")?c=localStorage.activity:(c=1.375,localStorage.setItem("activity",c)),i("#gender"),i("#activity"),l("#height"),l("#weight"),l("#age"),a()}(),function(n,o){function s(n){const s=document.querySelector(".modal__dialog");s.classList.remove("show"),s.classList.add("hide"),t(".modal",o);const c=document.createElement("div");c.classList.add("modal__dialog"),c.innerHTML=`\n      <div class="modal__content">\n        <div class="modal__close" data-close>×</div>\n        <div class="modal__title">${n}</div>\n      </div>\n    `,document.querySelector(".modal").append(c),setTimeout((()=>{c.remove(),s.classList.add("show"),s.classList.remove("hide"),e(".modal")}),4e3)}document.querySelectorAll(n).forEach((e=>{!function(e){e.addEventListener("submit",(t=>{t.preventDefault();const n=document.createElement("img");n.src="img/form/spinner.svg",n.style.cssText="\n        display: block;\n        margin: 0 auto;\n      ",e.insertAdjacentElement("afterend",n),e.querySelector("button").disabled=!0;const o=new FormData(e);(async(e,t)=>{const n=await fetch(e,{method:"POST",headers:{"Content-type":"application/json;charset=utf-8"},body:t});if(!n.ok)throw new Error(`Could not fetch ${e}, status: ${n.status}`);return await n.json()})("http://localhost:3000/requests",JSON.stringify(Object.fromEntries(o.entries()))).then((e=>{s("Спасибо, скоро мы с вами свяжемся!"),console.log(e)})).catch((()=>{s("Что-то пошло не так...(")})).finally((()=>{e.querySelector("button").disabled=!1,n.remove(),e.reset()}))}))}(e)}))}("form",n),function({container:e,slidesArray:t,currCounter:n,maxCounter:o,prevArrow:s,nextArrow:c,wrapper:r,slideField:a}){const i=document.querySelector(e),l=document.querySelectorAll(t),d=document.querySelector(n),u=document.querySelector(o),m=document.querySelector(s),h=document.querySelector(c),f=document.querySelector(r),v=document.querySelector(a),g=window.getComputedStyle(f).width,_=document.createElement("ul");let y=1,p=0,w=[];function S(e){return e<10?`0${e}`:e}u.textContent=S(l.length),d.textContent=S(y),i.style.position="relative",_.classList.add("carousel-indicators"),i.append(_),v.style.cssText=`\n    width: ${100*l.length}%;\n    display: flex;\n    transition: 0.5s all;\n  `,f.style.overflow="hidden",l.forEach((e=>{e.style.width=g})),h.addEventListener("click",(()=>{p===E(g)*(l.length-1)?p=0:p+=E(g),y++,L(y,p)})),m.addEventListener("click",(()=>{0===p?p=E(g)*(l.length-1):p-=E(g),y--,L(y,p)}));for(let e=0;e<l.length;e++)w[e]=document.createElement("li");function L(e,t){var n;e<1&&(y=l.length),e>l.length&&(y=1),n=y,w.forEach((e=>e.style.opacity=.5)),w[n-1].style.opacity=1,d.textContent=S(n),v.style.transform=`translateX(-${t}px)`}function E(e){return+e.replace(/\D/g,"")}w.forEach(((e,t)=>{e.id=`slide${t}`,e.classList.add("dot"),_.append(e),e.addEventListener("click",(e=>{e.target&&e.target.id===`slide${t}`&&function(e){p=g.slice(0,-2)*e++,y=e++,L(y,p)}(t)}))})),L(y,p)}({container:".offer__slider",slidesArray:".offer__slide",currCounter:"#current",maxCounter:"#total",prevArrow:".offer__slider-prev",nextArrow:".offer__slider-next",wrapper:".offer__slider-wrapper",slideField:".offer__slider-inner"})}))}();
//# sourceMappingURL=main.bundle.js.map